<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>planc: OpenMP Non-negative Matrix Factorization</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">planc
   </div>
   <div id="projectbrief">Parallel Lowrank Approximation with Non-negativity Constraints</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">OpenMP Non-negative Matrix Factorization </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2>Install Instructions </h2>
<p>This program depends on:</p>
<ul>
<li>Armadillo library which can be found at <a href="https://arma.sourceforge.net">https://arma.sourceforge.net</a></li>
<li>OpenBLAS <a href="https://github.com/xianyi/OpenBLAS">https://github.com/xianyi/OpenBLAS</a>. If building with OpenBLAS and mkl is discoverable by cmake, use -DCMAKE_IGNORE_MKL=1.</li>
</ul>
<p>Once you have installed these libraries set the following environment variables.</p>
<div class="fragment"><div class="line">export ARMADILLO_INCLUDE_DIR=/home/rnu/libraries/armadillo-6.600.5/include/</div><div class="line">export LIB=$LIB:/home/rnu/libraries/openblas/lib:</div><div class="line">export INCLUDE=$INCLUDE:/home/rnu/libraries/openblas/include:$ARMADILLO_INCLUDE_DIR:</div><div class="line">export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/home/rnu/libraries/openblas/lib/:</div><div class="line">export CPATH=CPATH:$INCLUDE:</div></div><!-- fragment --><ul>
<li>Create a build directory.</li>
<li>Change to the build directory</li>
<li>In case of MKL, source the <code>$MKLROOT/bin/mkl_vars.sh intel64</code></li>
<li>run cmake [PATH TO THE CMakeList.txt]</li>
<li>make</li>
</ul>
<h2>Sparse NMF </h2>
<p>Run cmake with -DCMAKE_BUILD_SPARSE=1</p>
<h2>Sparse Debug build </h2>
<p>Run cmake with -DCMAKE_BUILD_SPARSE -DCMAKE_BUILD_TYPE=Debug</p>
<h2>Building on Cray-EOS/Titan </h2>
<p>CC=CC CXX=CC cmake ~/nmflibrary/mpi/ -DCMAKE_IGNORE_MKL=1</p>
<h1>Intel MKL vs Openblas </h1>
<ul>
<li><code>export LD_LIBRARY_PATH=MKL_LIB path</code></li>
<li>source the <code>$MKLROOT/bin/mkl_vars.sh intel64</code></li>
</ul>
<h1>Runtime usage </h1>
<p>Tell OpenBlas how many threads you want to use. For example on a quad core system use the following.</p>
<div class="fragment"><div class="line">export OPENBLAS_NUM_THREADS=4</div><div class="line">export MKL_NUM_THREADS=4</div><div class="line">export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:MKL_LIB</div></div><!-- fragment --><h1>Command Line options </h1>
<p>The single alphabet is called short option and the string equivalent is called long option. For eg., "input" is the long equivalent of short option 'i'. Typically long option is passed with "--algo=3" and short option with "-a 0". The following is the brief description of the various command line options.</p>
<ul>
<li>{"input",'i'} - Either it can be a path to a sparse/dense matrix file or synthetically generate matrix. If this option is not passed, we generate synthetic matrix.</li>
<li>{"algo",'a'} - We support four algorithms. 0 - Multiplicative update (MU) 1 - Hierarchical Alternating Least Squares (HALS) 2 - ANLS/BPP implementation <br />
* {"lowrank",'k'} - Low rank 'k'.</li>
<li>{"iter",'t'} - Number of iterations</li>
<li>{"dimensions",'d'} - This is applicable only for synthetic matrices. It takes space separated dimensions as string. For eg., "21000 16000" means 21000 rows and 16000 columns.</li>
<li>{'o'} - File name to dump W and H. _w and _h will be appended to distinguish W and H matrix. <br />
* {"sparsity",'s'} - Density for the synthetic sparse matrix.</li>
</ul>
<p>Few usage examples are Usage 1 : Sparse/Dense NMF for an input file with lowrank k=20 for 20 iterations. </p><div class="fragment"><div class="line">Usage 2 : Sparse/Dense synthetic NMF for a 20000x10000 matrix</div><div class="line">````NMFLibrary --algo=[0/1/2] --lowrank=20 -p &quot;20000 10000&quot; --iter=20</div></div><!-- fragment --><p>Usage3 : Sparse/Dense NMF for an input file with lowrank k=20 for 20 iterations starting from the initialization matrix defined in winit and hinit. Finally, it dumps the output W and H in the specified file <code>NMFLibrary --algo=[0/1/2] --lowrank=20 --input=filename --winit=filename --hinit=filename --w=woutputfilename --h=outputfilename --iter=20</code></p>
<h1>Citation </h1>
<p>If you are using this openmp implementation, kindly cite.</p>
<p>James P. Fairbanks, Ramakrishnan Kannan, Haesun Park, David A. Bader, Behavioral clusters in dynamic graphs, Parallel Computing, Volume 47, August 2015, Pages 38-50, ISSN 0167-8191, <a href="http://dx.doi.org/10.1016/j.parco.2015.03.002">http://dx.doi.org/10.1016/j.parco.2015.03.002</a>. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Dec 19 2018 14:17:13 for planc by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
